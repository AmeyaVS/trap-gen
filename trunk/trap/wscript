#!/usr/bin/env python
# -*- coding: iso-8859-1 -*-

import os

def build(bld):
    bld.recurse('runtime memAnalyzer')

    bld(features='cxx cxxstlib',
            target = 'trap',
            use = 'loader syscall bfdFrontend tools debugger utils profiler BOOST_THREAD BOOST_REGEX BOOST_FILESYSTEM BOOST_SYSTEM BFD SYSTEMC WINSOCK',
            install_path = os.path.join('${PREFIX}', 'lib')
    )

    if bld.env['ENABLE_SHARED_64']:
        bld(features='cxx cxxshlib',
                target = 'trap',
                use = 'loader syscall bfdFrontend tools debugger utils profiler BOOST_THREAD BOOST_REGEX BOOST_FILESYSTEM BOOST_SYSTEM BFD SYSTEMC WINSOCK',
                install_path = os.path.join('${PREFIX}', 'lib')
        )

    bld(features='py', source=bld.path.ant_glob('*.py'), install_path = os.path.join('${PYTHONDIR}', 'trap'))
